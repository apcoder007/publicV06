<div class="popup-content" ng-controller="loginCtrl" style="width:416px;">
  <md-toolbar class="md-primary">
    <div class="md-toolbar-tools">
        <h5 class="md-subhead">
          Login / Register <br />
          <small>Enter your email address</small>
        </h5>
        <span flex></span>
        <md-button class="md-icon-button" ng-click="close()">
          <md-icon class="material-icons" aria-label="Close dialog" style="font-size:20px;">clear</md-icon>
        </md-button>
      </div>
  </md-toolbar>
  <md-content>
    <form name="loginForm" ng-submit="login(loginForm)" ng-show="!requested" ng-hide ="pass_show || set_pass || verify_show || reg_show" novalidate>
      <div layout="row">
        <md-input-container class="first" flex>
          <input type="text" name="email" ng-model="user.email" id="login1-email" ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/" placeholder="email"  required autofocus>
          <span class="error" ng-if="!loginForm.email.$valid && (loginForm.email.$touched || loginForm.$submitted)">Provide a valid email</span>
        </md-input-container>
      </div>

      <div layout="row">
        <md-button class="md-raised md-primary" type="submit" ng-disabled="p_login1" flex>@{{ p_login1 ? 'Please Wait...' : 'Next' }}</md-button>
      </div>
    </form>

    <form name="login2" ng-submit="submitLogin2(login2)" layout-padding layout="column" ng-show="pass_show " novalidate>
      <div layout="row" layout-align="center">
        <md-icon class="material-icons" style="font-size:70px;height:70px;width:70px;color:rgba(97, 71, 53, 0.7)">person</md-icon>
      </div>
      <span style="text-align:center;">@{{ user.name  }}</span>
      <md-input-container>
        <label>Password</label>
        <input type="password" name="password" ng-model="user.password" id="login2-password" required autofocus>
        <div ng-messages="login2.password.$error" ng-if="login2.$submitted">
          <div ng-message="required">Required *</div>
        </div>
      </md-input-container>
      <md-button class="md-primary md-raised" type="submit" ng-disabled="p_login2">@{{ p_login2 ? 'Please Wait...' : 'Next' }}</md-button>
    </form>

    <form name="verify" ng-submit="submitVerify(verify)" layout-padding layout="column" ng-show="verify_show" novalidate>
      <div layout="row" layout-align="center">
        <md-icon class="material-icons" style="font-size:70px;height:70px;width:70px;color:rgba(97, 71, 53, 0.7)">person</md-icon>
      </div>
      <span style="text-align:center;">@{{ user.name }}</span>
      <md-input-container>
        <label>Verification Code</label>
        <input type="code" name="verification_code" ng-model="user.verification_code" id="verification-code" required autofocus>
        <div ng-messages="verify.verification_code.$error" ng-if="verify.$submitted">
          <div ng-message="required">Required *</div>
        </div>
      </md-input-container>
      <md-button class="md-primary md-raised" type="submit" ng-disabled="p_verify">@{{ p_verify ? 'Please Wait...' : 'Next' }}</md-button>
    </form>

    <form name="setpass" ng-submit="submitsetPass(setpass)" layout-padding layout="column" ng-show="set_pass" novalidate>
      <div layout="row" layout-align="center">
        <md-icon class="material-icons" style="font-size:50px;height:50px;width:50px;color:rgba(97, 71, 53, 0.7)">lock</md-icon>
      </div>

      <h5 class="md-subhead">Set password:</h5>
      <md-input-container >
        <label>Mobile</label>
        <input type="text" name="mobile" ng-model="user.mobile" id="register-mobile" required ng-pattern='/^[1-9][0-9]{9}$/'>
        <div ng-messages="register.mobile.$error" ng-if="register.$submitted">
          <div ng-message="required">Required *</div>
          <div ng-message="pattern">Please enter 10 digit mobile number</div>
        </div>
      </md-input-container>


      <md-input-container>
        <label>Password</label>
        <input type="password" name="set_password" ng-model="user.password" id="set-password" required>
        <div ng-messages="set.password.$error" ng-if="changepass.$submitted">
          <div ng-message="required">Required *</div>
        </div>
      </md-input-container>

      <md-input-container>
        <label>Confirm Password</label>
        <input type="password" name="set_password_confirmation" ng-model="user.password_confirmation" id="set-password_confirmation" required pattern="\b@{{ user.password }}\b">
        <div ng-messages="set.password_confirmation.$error" ng-if="changepass.$submitted">
          <div ng-message="pattern">Passwords not matching</div>
          <div ng-message="required">Required *</div>
        </div>
      </md-input-container>
      <md-button class="md-primary md-raised" type="submit" ng-disabled="p_changepass">@{{ p_changepass ? 'Please Wait...' : 'Submit' }}</md-button>
    </form>

    <form name="register" ng-submit="submitRegister(register)" layout-padding layout="column" ng-show="reg_show" novalidate>
      <div layout="row" layout-align="center">
        <md-icon class="material-icons" style="font-size:70px;height:70px;width:70px;color:rgba(97, 71, 53, 0.7)">person</md-icon>
      </div>

      <div layout="row">
        <md-input-container flex="70" style="margin-right:0.5rem">
          <label>Name</label>
          <input type="text" name="name" ng-model="user.name" id="register-name" required autofocus>
          <div ng-messages="register.name.$error" ng-if="register.$submitted">
            <div ng-message="required">Required *</div>
          </div>
        </md-input-container>

        <md-input-container flex="30" style="margin-left:0.5rem">
          <label>Mobile</label>
          <input type="text" name="mobile" ng-model="user.mobile" id="register-mobile" required ng-pattern='/^[1-9][0-9]{9}$/'>
          <div ng-messages="register.mobile.$error" ng-if="register.$submitted">
            <div ng-message="required">Required *</div>
            <div ng-message="pattern">Please enter 10 digit mobile number</div>
          </div>
        </md-input-container>
      </div>

      <div layout="row">
        <md-input-container flex="100">
          <label>email</label>
          <input type="email" name="email" ng-model="user.email" id="register-email" required ng-pattern="/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/">
          <div ng-messages="register.email.$error" ng-if="register.$submitted">
            <div ng-message="required">Required *</div>
            <div ng-message="pattern">Please enter a valid email</div>
          </div>
        </md-input-container>
      </div>

      <div layout="row">
        <md-input-container style="margin-right:0.5rem">
          <label>Password</label>
          <input type="password" name="password" ng-model="user.password" id="register-password" required>
          <div ng-messages="register.password.$error" ng-if="register.$submitted">
            <div ng-message="required">Required *</div>
          </div>
        </md-input-container>

        <md-input-container style="margin-left:0.5rem">
          <label>Confirm Password</label>
          <input type="password" name="password_confirmation" ng-model="user.password_confirmation" id="register-password" required pattern="\b@{{ user.password }}\b">
          <div ng-messages="register.password_confirmation.$error" ng-if="register.$submitted">
            <div ng-message="required">Required *</div>
            <div ng-message="pattern">Passwords not matching</div>
          </div>
        </md-input-container>
      </div>

      <md-button class="md-primary md-raised" type="submit" ng-disabled="p_register">@{{ p_register ? 'Please Wait...' : 'Register' }}</md-button>
    </form>
  </md-content>
  <md-content style="margin-top:1px;">
    <div class="social-login">
      <a href="facebook/redirect" class="md-raised md-button" md-ink-ripple="#0B1A38" style="background-color:#3e5b98">
        <div class="socicon-facebook sociocon"></div>
        <span>Sign in with Facebook</span>
      </a>
      <a href="google/redirect" class="md-raised md-button" md-ink-ripple="#711D12" style="background-color:#DD4C39">
        <div class="sociocon socicon-googleplus"></div>
        <span>Sign in with Google</span>
      </a>
    </div>
  </md-content>
</div>

<style type="text/css">
    md-content > form{
      margin-bottom: 30px;
      margin-top: 10px;
    }

    .social-login a.md-button{
      margin: 3px 0;
      width: 100%;
      text-align: start;
      color: white;
      padding: 0;
      border-radius: 0;
    }

    .social-login a.md-button > div.sociocon{
      float: left;
      width: 36px;
      text-align: center;
      font-size: 29px;
      border-right: solid 2px;
    }
    .social-login a.md-button > div.sociocon::before{
      vertical-align: middle;
    }

    .social-login a.md-button > span{
      text-transform: none;
      font-weight: bold;
      padding-left: 18px;
      float: left;
    }
</style>
